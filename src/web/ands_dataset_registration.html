<!DOCTYPE html>
<html>
  <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <title> Tissue Stack - ANDS Data Set Registration</title>
  
        <script src="js/libs/jquery/jquery-1.7.1.min.js"></script>
  
        <script type="text/javascript">
        var afterSubmission = function() {
        	// reset error
        	$("#error").html("");
        	$("#error_div").hide();

            var showErrorMessage = function(message) {
            	$("#error").html(message);
                $("#error_div").show();
            }
        	
            var successCase = function(data, textStatus, jqXHR) {
                if (!data.response && !data.error) {
                	showErrorMessage("Backend returned nothing!");
                    return false;
                }
                if (data.error) {
                	showErrorMessage("Error: " + (data.error.message ? data.error.message : "Registration failed!"));
                    return false;
                }
                if (data.response.noResults) {
                	showErrorMessage("Backend returned nothing!");
                    return false;
                }
            	$("#ands_submit").attr("disabled","disabled");
                $("#thanks").show();
            }

            var errorCase = function(jqXHR, textStatus, errorThrown) {
            	showErrorMessage("Error connecting to backend: " + textStatus + " " + errorThrown);
            }

            $.ajax({
                async : true,
                data : $("#ands_registration").serialize(),
                dataType : "json",
                url : "/backend/ands/add_data_set/json",
                type : "POST",
                cache : false,
                timeout : 30000,
                success: successCase,
                error: errorCase
            });
        };
        </script>
  </head>
  
  
  <body>
    <h3>Data Set Information</h3>
    <div id="error_div" style="color: red; display: none;">
	    <h4 id="error"></h4>
    </div>
    <form id="ands_registration" action="#" method="POST">
        Id:<br />
        <input name="id" type="text" value="-1" />  
        <br /><br />
        Something else:<br />
        <input name="else" type="text" value="something else" />
        <br /><br />
        <input id="ands_submit" type="submit" onclick="afterSubmission();return false;" />
        <br /><br />
        <a href="#" onclick="window.closeMe();return false;">Close Me</a>
    </form>
    <br />
    <h4 id="thanks" style="color: blue;display: none;">Thank you for your submission.</h4>
  </body>
</html>
